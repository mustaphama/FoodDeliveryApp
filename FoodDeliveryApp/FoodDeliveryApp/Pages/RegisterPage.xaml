<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FoodDeliveryApp.Pages.RegisterPage"
             xmlns:local="clr-namespace:FoodDeliveryApp.MVVM"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             Title="RegisterPage">
    <ContentPage.BindingContext>
        <local:RegistrationViewModel/>
    </ContentPage.BindingContext>
    <ScrollView>
        <StackLayout Padding="20">
            <HorizontalStackLayout Padding="0"  Margin="0,0,0,10">
                <Button Text="&#xf053;" FontFamily="FontAwesome" FontSize="16" VerticalOptions="Center" HorizontalOptions="Start" Command="{Binding NavigateBackCommand}" FontAttributes="Bold" Margin="-10,0,0,0" BackgroundColor="Transparent" TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"/>
                <Label Text="Register" FontSize="20" VerticalOptions="Center" FontAttributes="Bold"/>
            </HorizontalStackLayout>
            <!-- Name Entry -->
            <Label Text="Name" Margin="0,10,0,0"/>
            <Entry Placeholder="Enter your name" Text="{Binding Name}" />

            <!-- Email Entry -->
            <Label Text="Email" Margin="0,10,0,0"/>
            <Entry Placeholder="Enter your email" Text="{Binding Email}" Keyboard="Email" />

            <!-- Password Entry -->
            <Label Text="Password" Margin="0,10,0,0"/>
            <Grid ColumnDefinitions="9*, 1*" Margin="0" Padding="0" ColumnSpacing="0">
                <Entry x:Name="PasswordEntry" Placeholder="Password" IsPassword="True" Text="{Binding Password}" Grid.Column="0"/>
                <Button x:Name="PasswordEyeButton"
FontFamily="FontAwesome"
Text="&#xf070;"
FontSize="18"
     Clicked="OnPasswordEyeButtonClicked" Grid.Column="1" Padding="0" BackgroundColor="Transparent"
TextColor="{DynamicResource Primary}"/>
            </Grid>
            <!-- Confirm Password Entry -->
            <Label Text="Confirm Password" Margin="0,10,0,0"/>
            <Grid ColumnDefinitions="9*, 1*" Margin="0" Padding="0" ColumnSpacing="0">
                <Entry x:Name="ConfirmPasswordEntry"  Placeholder="Confirm your password" IsPassword="True" Text="{Binding ConfirmPassword}" Grid.Column="0"/>
                <Button x:Name="ConfirmPasswordEyeButton"
FontFamily="FontAwesome"
Text="&#xf070;"
FontSize="18"
     Clicked="OnConfirmPasswordEyeButtonClicked" Grid.Column="1" Padding="0" BackgroundColor="Transparent"
TextColor="{DynamicResource Primary}"/>
            </Grid>

            <!-- Phone Number Section -->
            <Label Text="Phone Number" Margin="0,10,0,0"/>
            <StackLayout Orientation="Horizontal">
                <!-- Region Code Picker -->
                <Picker Title="Region Code"
        ItemsSource="{Binding RegionCodes}"
        SelectedItem="{Binding SelectedRegionCode}"
        ItemDisplayBinding="{Binding DisplayText}" WidthRequest="75" />
                <!-- Phone Number Entry -->
                <Entry Placeholder="701234568" Text="{Binding PhoneNumber}" Keyboard="Telephone" MaxLength="9" WidthRequest="200" />
            </StackLayout>

            <!-- Address Entry -->
            <Label Text="Address" Margin="0,10,0,0"/>
            <Entry Placeholder="Enter your address" Text="{Binding Address}" />


            <Grid RowDefinitions="*,*" ColumnDefinitions="*,*">
                <!-- City Entry -->
                <Label Grid.Row="0" Grid.Column="0" Text="City" Margin="0,10,0,0"/>
                <Entry Grid.Row="1" Grid.Column="0" Placeholder="City" Margin="0"  Text="{Binding City}" />
                <!-- Country Entry -->
                <Label Grid.Row="0" Grid.Column="1" Text="Country" Margin="0,10,0,0"/>
                <Entry Grid.Row="1" Grid.Column="1" Placeholder="Country" Margin="0"  Text="{Binding Country}" />
            </Grid>

            <!-- Register Button -->
            <Button Text="Register" Command="{Binding RegisterCommand}" Margin="0,20,0,20" />
            <Grid>
                <Frame Margin="5" BackgroundColor="{Binding MessageColor}" IsVisible="{Binding MessageVisibility}" Opacity="0.2" BorderColor="Black" >
                    <!-- The Frame's content is here (background color with opacity) -->
                </Frame>

                <Label Text="{Binding Message}"
TextColor="{Binding MessageColor}"
HorizontalOptions="Center"
Margin="10"
VerticalOptions="CenterAndExpand"
FontSize="12"
IsVisible="{Binding MessageVisibility}"
ZIndex="1" />
                <!-- Ensures the label appears on top of the frame -->
            </Grid>
        </StackLayout>
    </ScrollView>
</ContentPage>